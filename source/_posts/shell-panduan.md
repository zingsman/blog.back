---
title: shell中条件测试与判断语句
date: 2017-06-19 14:21:48
tags:
    - WORK
categories: SHELL
---
### 1. 概述
在shell中，执行条件表达式后会返回`真`或`假`，`0`表示真，非0表示假。下列是常见的条件测试常用的语法。
1. test <测试表达示>   test后面有个空格，再接表达式。
2. [ 测试表达式 ]      中括号里面，左右各有一个空格。
3. [[ 测试表达式 ]]    双中括号，是很新的用法。
4. ((测试表达式))      这个两端不需要空格
注意：第一种用法和第二种用法是等价的，2方法用的更广，里面可以使用通配符进行匹配。
“&&、||、>、<、”通常是出现在[[]]中，而[]中一般用 \-a \-o \-gt \-lt 代替判断符号

### 2. 逻辑操作符 && ||
例子：
`test -f file && echo true || echo false`
在上面例子中，如果file文件存在，返回0，代表真。
&& 代表前一次为真才执行。  || 表示，为假才执行。注意**`test -f file`返回结果假如第一次逻辑运算不匹配，会继续传到后面去**
>关于test,使用用法，可以使用man test查看

test 命令的测试功能非常强大，和[]和[[]] 功能重合。可以选择性使用

### 3. 举例
1. `test -f file` 等价于 `[ -f file ]` 
2. 双中括号使用，双中括号里面两端也需要空格。
`[[ -f file ]] && echo yes || echo no`
3. test 常用参数，可以判断是否为空，各种权限（rwx），大小，文件的新旧等 

### 4. 特殊条件测试表达式举例(不使用if条件判断示情况下)
```
[ 表达式 ] &&{
    命令1
    命令2
}
[[ 表达式 ]] &&{
    命令1 
    命令2 
}
test 条件1 &&{
    命令1
    命令2
}
#使用if判断结构
if [ 表达式 ]
  then
    命令1
    命令2
fi
```
### 5. 字符串测试操作符
可以使用 -n 参数 ，代表后面字符串不等于空， -z 参数，代表字符串为空
还可以使用 =  或者 != 表示两个字符串相等或者等。这里是指内容相当而不是长度。
整数二元比较操作符使用参考：

在[]和test中使用 | 在(())和[[]]中使用 | 说明
---------------- | ------------------ | -- 
\-eq | ==或= | 相等，全拼为equal 
\-ne | !=    | 不相等，全拼为not equal 
\-ge | >=    | 大于等于，全拼为greater than 
\-gt | >     | 大于，全拼为greater equal 
\-le | <=    | 小于等于，全拼为less equal 
\-lt | <     | 小于，全拼为less than 

**注意** 一般来说，[]里面是不能<或者>,但是可以先使用转义符
### 6. 逻辑比较符

在[]和test中使用 | 在(())和[[]]中使用 | 说明
- | - | -
\-a | && | and，与，两端为真，则结果为真
\-o | 两竖 |or，或，两端有一个为真，则结果为真
! |! |not,非，两端相反，则结果为真

举例：
`[ -f file1 -a -f file2 ] && echo yes || echo no`
### 7. 企业案例
输入或者通过命令传入一个字符或数字，如果传入的数字等于1，就打印1；
如果等于2，就打印2.如果不等于1也不等于2.就提示输入不对。然后退出程序。
```
#!/bin/bash
read -p "please input your result:" a
[ "$a" == "1" ] && echo 1 && exit 0
[ "$a" == "2" ] && echo 2 && exit 2
[ "$a" -ne  "1" -o "$a" -ne "2" ] &&{
        echo "your input error!"
        exit 1
}
```
